<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<button class="select">赤を持つ</button>
		<button class="select">緑を持つ</button>
		<button class="select">青を持つ</button>
		<button onclick="writePen()">書く</button>
		<p id="info"></p>
		<p id="penStatus"></p>
<script>
	const penStatus=document.getElementById('penStatus');
	const bts=document.querySelectorAll('.select');
	const info=document.getElementById('info');
	class ColorPen{
		constructor(color,length,penColor){
				this.color=color;
				this.length=length;
				this.penColor=penColor;
		}
		write(){
				let msg='';
				if(this.length <=0){
						msg='もう書けません';
				}else{
						this.length-=0.5;
						msg=this.color+'で書いた。残りの長さ'+this.length;
				}
				return msg;
		}
	}
	let pens=[
				new ColorPen('赤',10,'red'),
				new ColorPen('緑',10,'green'),
				new ColorPen('青',10,'blue')
			];
		let pen=null;
		for(let i=0;i<bts.length;i++){
				bts[i].addEventListener('click',()=>{
						pen=pens[i];
						info.textContent=pen.color+'を持った';
						showPen();	
				});
		}
		function showPen(){
						penStatus.textContent=pen.length+'cm';
						penStatus.style.width=pen.length+'cm';
						penStatus.style.backgroundColor=pen.penColor;
						penStatus.style.color='yellow';
		}
	const writePen=()=>{
				let msg='';
				if(pen == null){
					msg='ペンを持ってください！';
				}else{
					msg=pen.write();
					showPen();
				}
				info.textContent=msg;
		};
	
</script>
	</body>
</html>
